<%- include('../partials/header') %>

<h1><%- title %></h1>

<!-- Flash messages -->
<%- messages() %>

    <!-- Validation errors -->
    <% if (errors) { %>
        <ul class="notice">
            <% errors.array().forEach(error=> { %>
                <li>
                    <%= error.msg %>
                </li>
                <% }) %>
        </ul>
        <% } %>

    <div class="container">
        <h2>Add service record for <%= vehicle.inv_make %>
                <%= vehicle.inv_model %> (<%= vehicle.inv_year %>)</h2>

        <% if (errors && errors.length) { %>
            <div class="alert alert-danger">
                <ul>
                    <% errors.forEach(function(err){ %>
                        <li>
                            <%= err.msg %>
                        </li>
                        <% }) %>
                </ul>
            </div>
            <% } %>

                <form action="/service/add/<%= vehicle.inv_id %>" method="post" novalidate>
                    <div class="form-group">
                        <label for="service_date">Service date</label>
                        <input id="service_date" name="service_date" type="date" class="form-control"
                            value="<%= formData.service_date || '' %>" required>
                    </div>

                    <div class="form-group">
                        <label for="mileage">Mileage</label>
                        <input id="mileage" name="mileage" type="number" class="form-control"
                            value="<%= formData.mileage || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" name="description" class="form-control"
                            required><%= formData.description || '' %></textarea>
                    </div>

                    <div class="form-group">
                        <label for="cost">Cost</label>
                        <input id="cost" name="cost" type="number" step="0.01" class="form-control"
                            value="<%= formData.cost || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="service_center">Service Center</label>
                        <input id="service_center" name="service_center" class="form-control"
                            value="<%= formData.service_center || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="next_service_date">Next Service Date</label>
                        <input id="next_service_date" name="next_service_date" type="date" class="form-control"
                            value="<%= formData.next_service_date || '' %>">
                    </div>

                    <button type="submit" class="btn btn-primary mt-2">Save</button>
                    <a href="/service/list/<%= vehicle.inv_id %>" class="btn btn-secondary mt-2">Back to service
                        list</a>
                </form>
    </div>

    <%- include('../partials/footer') %>